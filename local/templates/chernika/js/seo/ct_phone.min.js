(function(){function A(){"object"===typeof window.zTrackerCallbacks&&(window.zTrackerCallbacks.forEach(function(d){if("function"==typeof d)try{d()}catch(h){}}),window.zTrackerCallbacks=[])}"undefined"===typeof window.zTracker&&(window.zTracker=function(d){function h(a,b){var c="",e=k()||{};e[m]={ct:a};l&&l.phone&&(e[m].phone=l.phone,e[m].cLength=l.cLength,e[m].mask=r);a=[];for(var g in e)if(e.hasOwnProperty(g)){var f=g+":";"object"==typeof e[g]?(f+=e[g].ct,e[g].phone&&(f+=":"+e[g].phone+":"+(e[g].cLength||
"")+":"+encodeURIComponent(e[g].mask||""))):f+=e[g];a.push(f)}b&&(e=new Date,e.setTime(e.getTime()+864E5*b),c+=";expires="+e);c+=";path=/";x&&(c+=";domain="+x);document.cookie="ztracker="+encodeURIComponent(a.join("|"))+c}function k(a){for(var b=(a||"ztracker")+"=",c=document.cookie.split(";"),e=0;e<c.length;e++){var g=c[e].trim();if(0===g.indexOf(b)){c=decodeURIComponent(g.substring(b.length,g.length));if(a)return c;var f={},B=0;if(0<c.indexOf(":"))c.split("|").map(function(p){p=p.split(":");f[p[0]]=
{ct:p[1],phone:p[2],cLength:p[3],mask:decodeURIComponent(p[4]||"")};B++}),f[0]&&1==B&&0!=m&&(f[m]={ct:f[0]},delete f[0]);else{if("undefined"==typeof window.ctTrackerDefCKey)window.ctTrackerDefCKey=m;else if(window.ctTrackerDefCKey!=m)break;f[m]={ct:c}}return f}}return null}function t(a){if(!a||0>a.indexOf("."))return!1;var b=location.hostname.indexOf(a);return 0==b||0<b&&"."==location.hostname.substr(b-1,1)?(x=a,!0):!1}function q(a){if(C)return!1;l&&D(l.phone,l.cLength,!0);C=!0;if(!a.roistat)if(window.roistat&&
window.roistat.visit)a.roistat=window.roistat.visit;else{var b=window.roistatVisitCallback||!1;window.roistatVisitCallback=function(c){a.roistat=c;y&&L(a);b&&b(c)}}d.metrics?(d.metrics.metrika&&(n(function(){if(window["yaCounter"+d.metrics.metrika])return E(a),!0}),document.addEventListener("yacounter"+d.metrics.metrika+"inited",function(){E(a)})),d.metrics.ga&&n(function(c){if(window.ga||window.gtag||25<c&&window.gaGlobal)return M(a),!0}),(d.metrics.metrika||d.metrics.ga)&&setTimeout(function(){y||
u(a)},3E3)):u(a)}function n(a,b){if(!a(0))var c=0,e=(b||2E3)/50,g=setInterval(function(){c++;(a(c)||c>e)&&clearInterval(g)},50)}function E(a){if(!F){F=!0;var b="yaCounter"+d.metrics.metrika;window[b]&&window[b].hasOwnProperty("getClientID")&&(a.metrika={clid:window[b].getClientID(),tracker:d.metrics.metrika},d.metrics.ga&&!a.ga||u(a))}}function M(a){function b(c){c&&(a.ga={clid:c,tracker:d.metrics.ga},d.metrics.metrika&&!a.metrika||u(a))}window.gtag?gtag("get",d.metrics.ga,"client_id",b):window.ga?
ga(function(c){!c&&ga.getAll&&ga.getAll()[0]&&(c=ga.getAll()[0]);c&&b(c.get("clientId"))}):window.gaGlobal&&gaGlobal.vid&&b(gaGlobal.vid)}function u(a){y=!0;G(z,a,function(b){if(b.isError)l&&!a.ping&&(N(),l=!1),(b.cookie||a.cookie)&&h(b.cookie||a.cookie,7);else{b.cookie&&(a.cookie=b.cookie);if(!l||l.phone!=b.phone||"mask"in b&&(b.mask||"")!=r)"mask"in b&&(r=b.mask),D(b.phone,b.countryLength),l={phone:b.phone,cLength:b.countryLength};a.cookie&&h(a.cookie,7);b.interval&&setTimeout(function(){a.active=
v;a.ping=!0;u(a);v=!1},1E3*b.interval)}})}function L(a){if(a.cookie&&a.roistat){var b={};["cookie","id","roistat"].forEach(function(c){b[c]=a[c]});G(z+"?update",b)}}function H(){var a=document.getElementsByClassName(w);if(I){var b=document.querySelectorAll('a[href^="tel:"], a[href^="callto:"]');b=[].slice.call(b).filter(function(c){return!c.classList.contains(w)});return[].slice.call(a).concat(b)}return a}function J(a){return a.hasAttribute("data-ct-origin-phone")||a.classList.contains(w)||0===a.innerText.replace(/[ ()+-]/g,
"").search(/^\d{6,12}$/)}function D(a,b,c){if(a||c){for(var e=H(),g=0;g<e.length;g++){var f=e[g];f.hasAttribute("href")&&(c&&f.setAttribute("data-ct-origin-href",f.getAttribute("href")),f.setAttribute("href",(0<=f.getAttribute("href").indexOf("callto")?"callto:+":"tel:+")+a));J(f)&&(c&&f.setAttribute("data-ct-origin-phone",f.innerHTML),f.innerHTML=zTracker.formatPhone(a,f.hasAttribute("data-mask")?f.getAttribute("data-mask"):r,parseInt(b)))}a=document.createEvent("Event");a.initEvent("zd:show",!0,
!0);document.dispatchEvent(a)}}function N(){for(var a=H(),b=0;b<a.length;b++){var c=a[b];c.hasAttribute("data-ct-origin-href")&&c.setAttribute("href",c.getAttribute("data-ct-origin-href"));J(c)&&(c.innerHTML=c.getAttribute("data-ct-origin-phone"))}}function G(a,b,c){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status&&c&&"function"==typeof c)try{var g=JSON.parse(e.responseText);c(g)}catch(f){}};e.open("POST",a,!0);b&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded");
e.send(b?K(b,!1):"")}function K(a,b){var c=[],e;for(e in a)if(a.hasOwnProperty(e)){var g=b?b+"["+e+"]":e,f=a[e];c.push(null!==f&&"object"===typeof f?K(f,g):encodeURIComponent(g)+"="+encodeURIComponent(f))}return c.join("&")}var x="",m=0,z="https://api.zadarma.com/calltracker/",w="zphone",I=!1,v=!0,y=!1,r=!1,C=!1,F=!1,l=!1;(function(){if(!d||!d.id)return!1;zTracker.url&&(z=zTracker.url);m=d.id.substr(32)||0;d.id=d.id.substr(0,32);d.cssClass&&(w=d.cssClass);d.links&&(I=!0);d.domain&&(d.domain.indexOf(",")?
d.domain.split(",").forEach(function(c){return!t(c)}):t(d.domain));["click","touchend","keyup"].forEach(function(c){window.addEventListener(c,function(){v=!0})});var a=k()||{};a=a[m]?a[m]:{};var b={url:window.location.href,referer:document.referrer,cookie:a.ct?a.ct:"",id:d.id,active:v,roistat:k("roistat_visit")};a.phone&&(r=a.mask,l={phone:a.phone,cLength:a.cLength});b.roistat||delete b.roistat;document.addEventListener("DOMContentLoaded",function(){q(b)});"loading"!=document.readyState&&q(b)}).call(this)},
"object"===typeof _zCtOptions&&new window.zTracker(_zCtOptions));zTracker.formatPhone=function(d,h,k){if(h){var t=h,q=h.indexOf("%"),n=0;0<=q&&(k=k||1,h=h.substr(0,q)+d.substr(0,k)+h.substr(q+1),n+=k);for(;n<d.length&&(h=h.replace("X",d[n]),t!=h);n++)t=h;n!=d.length&&(h+=d.substr(n));h=h.replace(/X/g,"").replace(/.*?\|/,"");if(-1<h.indexOf("~"))for(d=h.split("~"),h="",k=0;k<d.length;k++)h+='<span class="zphone-part-'+(k+1)+'">'+d[k]+"</span>";return h}return k?'<span class="zphone-country">+'+d.substr(0,
k)+'</span><span class="zphone-region"> ('+d.substr(k,3)+') </span><span class="zphone-number">'+d.substr(k+3,3)+"-"+d.substr(k+6,2)+(d.length>k+8?"-":"")+d.substr(k+8)+"</span>":'<span class="zphone-number">'+d+"</span>"};document.currentScript&&document.currentScript.hasAttribute("data-url")&&(zTracker.url=document.currentScript.getAttribute("data-url"));"loading"!=document.readyState?A():document.addEventListener("DOMContentLoaded",function(){A()})})();
